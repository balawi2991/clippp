# ๐ฏ ุชูููุช ุฏููู ูููููุงุช - ูุง ุชุธููู ุจูู ุงููููุงุช

## ๐ด ุงููุดููุฉ ุงูุณุงุจูุฉ:

### **ุงูุณููุงุฑูู:**
```javascript
Caption: "Success is not final"
Words timing:
- "Success" โ 0.0s - 0.4s
- "is" โ 0.4s - 0.5s
- "not" โ 0.5s - 0.7s
- "final" โ 0.7s - 1.1s

Caption duration: 0.0s - 1.1s
```

### **ุงููุดุงูู:**

#### **1. ุชุธููู ุจุนุฏ ุงูุชูุงุก ุงููุงุจุดู:**
```javascript
// ุงูููุฏ ุงููุฏูู:
return caption.words.length - 1;  // โ ูุฑุฌุน ุขุฎุฑ ูููุฉ ุฏุงุฆูุงู

// ุนูุฏ currentTime = 1.2s (ุจุนุฏ ุงูุชูุงุก ุงููุงุจุดู):
// โ ูุธูู "final" (ุฎุทุฃ!)
// โ ุงูููุฑูุถ: ูุง ุชุธููู!
```

#### **2. ุชุธููู ุจูู ุงููููุงุช (ุงููููุงุช):**
```javascript
// ุนูุฏ currentTime = 0.35s (ุจูู "Success" ู "is"):
// โ ุงูููุฏ ุงููุฏูู: ูุธูู "Success" (ุฎุทุฃ!)
// โ ุงูููุฑูุถ: ูุง ุชุธููู! (ูููุฉ ุทุจูุนูุฉ)
```

#### **3. ุชุธููู ูุจู ุจุฏุงูุฉ ุงููุงุจุดู:**
```javascript
// ุนูุฏ currentTime = -0.1s (ูุจู ุจุฏุงูุฉ ุงููุงุจุดู):
// โ ุงูููุฏ ุงููุฏูู: ูุธูู ูููุฉ (ุฎุทุฃ!)
// โ ุงูููุฑูุถ: ูุง ุชุธููู!
```

---

## โ ุงูุญู ุงูุฌุฏูุฏ:

### **ุงูููุทู:**
```javascript
const activeWordIndex = useMemo(() => {
  if (!caption.start || !caption.end) return null;
  
  if (caption.words && caption.words.length > 0) {
    // ุงุจุญุซ ุนู ุงููููุฉ ุงููุดุทุฉ
    for (let i = 0; i < caption.words.length; i++) {
      const word = caption.words[i];
      // โ ุชุธููู ููุท ุฃุซูุงุก ูุทู ุงููููุฉ ุจุงูุถุจุท
      if (currentTime >= word.s && currentTime < word.e) {
        return i;
      }
    }
    // โ ูู ูุฌุฏ ูููุฉ ูุดุทุฉ โ ูุง ุชุธููู
    return null;
  }
  
  // Fallback: ููุท ุฅุฐุง ูุงู ุฏุงุฎู ูุทุงู ุงููุงุจุดู
  if (currentTime < caption.start || currentTime >= caption.end) {
    return null; // โ ุฎุงุฑุฌ ูุทุงู ุงููุงุจุดู
  }
  
  // ุชูุฒูุน ูุชุณุงูู
  const captionDuration = caption.end - caption.start;
  const timeIntoCaption = currentTime - caption.start;
  const progress = Math.max(0, Math.min(1, timeIntoCaption / captionDuration));
  return Math.floor(progress * words.length);
}, [currentTime, caption.start, caption.end, caption.words, words.length]);

// ูู ุงูุฑูุฏุฑ:
const isActive = activeWordIndex !== null && index === activeWordIndex;
```

---

## ๐ ุงููุชุงุฆุฌ:

### **ูุจู:**
```
Time: 0.0s  โ "Success" โ (ุตุญูุญ)
Time: 0.2s  โ "Success" โ (ุตุญูุญ)
Time: 0.35s โ "Success" โ (ุฎุทุฃ! ุงููููุฉ ุงูุชูุช ุนูุฏ 0.4s)
Time: 0.45s โ "is" โ (ุตุญูุญ)
Time: 1.2s  โ "final" โ (ุฎุทุฃ! ุงููุงุจุดู ุงูุชูู)
```

### **ุจุนุฏ:**
```
Time: 0.0s  โ "Success" โ (ุตุญูุญ)
Time: 0.2s  โ "Success" โ (ุตุญูุญ)
Time: 0.35s โ ูุง ุชุธููู โ (ุตุญูุญ! ูููุฉ ุจูู ุงููููุงุช)
Time: 0.45s โ "is" โ (ุตุญูุญ)
Time: 1.2s  โ ูุง ุชุธููู โ (ุตุญูุญ! ุงููุงุจุดู ุงูุชูู)
```

---

## ๐ฏ ุงูููุงุฆุฏ:

### **1. ุฏูุฉ 100%:**
โ ุชุธููู ููุท ุฃุซูุงุก ูุทู ุงููููุฉ  
โ ูุง ุชุธููู ูู ุงููููุงุช ุงูุทุจูุนูุฉ  
โ ูุง ุชุธููู ุจุนุฏ ุงูุชูุงุก ุงููุงุจุดู

### **2. ุงุญุชุฑุงููุฉ:**
โ ูุซู YouTube/Netflix  
โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฃูุถู  
โ ุชุฒุงูู ูุซุงูู ูุน ุงูุตูุช

### **3. ุทุจูุนูุฉ:**
โ ูุญุชุฑู ุงููููุงุช ุงูุทุจูุนูุฉ  
โ ูุง ุชุธููู ูุณุชูุฑ  
โ ูุนูุณ ุงูููุงู ุงูุญูููู

---

## ๐งช ุงุฎุชุจุงุฑ ุงูุณููุงุฑูููุงุช:

### **Test 1: ุฏุงุฎู ุงููููุฉ**
```javascript
currentTime = 0.2s
word.s = 0.0s, word.e = 0.4s
Result: 0.2 >= 0.0 && 0.2 < 0.4 โ true โ
Action: ุชุธููู ุงููููุฉ โ
```

### **Test 2: ุจูู ุงููููุงุช (ูููุฉ)**
```javascript
currentTime = 0.35s
word1: s=0.0, e=0.4 โ 0.35 >= 0.0 && 0.35 < 0.4 โ true โ
// ููู ุงูุชุธุฑ! 0.35 < 0.4 ุตุญูุญ!

// โ ุฎุทุฃ ูู ุงูุชุญููู! ุฏุนูู ุฃุนูุฏ ุงููุญุต...
```

ุฏุนูู ุฃูุญุต ุงูููุฏ ูุฑุฉ ุฃุฎุฑู:

<function_calls>
<invoke name="grepSearch">
<parameter name="explanation">ุงูุจุญุซ ุนู ููููุฉ ุงุณุชุฎุฏุงู word.s ู word.e ูู ุงูููุฏ